[tools]
python = "3.11"

[env]
PYTHONPATH = "."

[tasks.install]
description = "Install dependencies from the lock file"
run = "uv sync"

[tasks.test]
description = "Run tests"
run = "python -m pytest"
sources = [
    "mise_task_tools/**/*.py",
    "tests/**/*.py",
]

[tasks.lint]
description = "Run linting"
run = [
    "ruff check .",
    "mypy .",
]
sources = [
    "mise_task_tools/**/*.py",
]

[tasks.format]
description = "Format code"
run = "black ."
sources = [
    "mise_task_tools/**/*.py",
]

[tasks.ci]
description = "Run CI checks"
depends = [
    "lint",
    "test",
]

[tasks.dev]
description = "Start development environment"
depends = ["install"]
run = "python test_server.py"

[tasks."test:coverage"]
description = "Run unit tests with coverage reporting"
run = "echo 'TODO: Add test command'"
sources = [
    "pyproject.toml",
]

[tasks."dev:serve"]
description = "Start the FastMCP server"
run = "uv run -m wise_mise_mcp.server"
depends = ["setup:bootstrap"]

[tasks."test:client"]
description = "Run the FastMCP client to test the server"
run = "uv run client.py"
depends = ["setup:bootstrap"]
